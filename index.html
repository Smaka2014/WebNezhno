<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Каталог Nezhno</title>
  <style>
    body {
      background: #232d36;
      color: #fff;
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 15px 20px;
      background: #182027;
      border-bottom: 1.5px solid #333b42;
      position: relative;
    }
    .logo {
      height: 32px;
    }
    .title {
      font-size: 1.2rem;
      font-weight: bold;
      margin-left: 15px;
    }
    .search-bar {
      flex: 1;
      margin: 0 16px;
      display: flex;
    }
    .search-bar input {
      width: 100%;
      padding: 7px 14px;
      border-radius: 8px;
      border: none;
      background: #1b2229;
      color: #fff;
      font-size: 1rem;
    }
    .menu {
      font-size: 2rem;
      cursor: pointer;
      margin-left: 16px;
    }
    .menu-popup {
      position: absolute;
      top: 64px;
      right: 20px;
      background: #202931;
      border-radius: 10px;
      box-shadow: 0 2px 14px #00000020;
      z-index: 10;
      display: none;
      min-width: 160px;
    }
    .menu-popup.active { display: block; }
    .menu-popup-item {
      padding: 16px;
      cursor: pointer;
      font-size: 1rem;
      border-bottom: 1px solid #253040;
      display: flex;
      align-items: center;
      color: #fff;
    }
    .menu-popup-item:last-child { border-bottom: none; }
    .cart-count {
      color: #47ef85;
      font-weight: bold;
      margin-left: 5px;
    }
    .catalog {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      padding: 24px;
    }
    .product-card {
      background: #202931;
      border-radius: 14px;
      padding: 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-shadow: 0 2px 14px #00000020;
    }
    .product-img {
      width: 92px;
      height: 120px;
      object-fit: contain;
      margin-bottom: 10px;
      background: #181d21;
      border-radius: 8px;
      box-shadow: 0 2px 6px #00000010;
    }
    .product-price { font-size: 1rem; font-weight: bold; margin-bottom: 6px;}
    .product-title { color: #a5fffa; text-transform: uppercase; font-size: .92rem; margin-bottom: 8px;}
    .add-btn {
      background: transparent;
      border: 1.5px solid #4151fc;
      color: #fff;
      border-radius: 8px;
      padding: 8px 20px;
      font-size: 1rem;
      margin-top: 12px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .add-btn:hover { background: #4151fc; color: #fff; }
    /* Кнопка перейти в корзину */
    .go-to-cart-btn {
      display: none;
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 36px;
      background: #4151fc;
      color: #fff;
      padding: 16px 32px;
      border-radius: 14px;
      border: none;
      font-size: 1.18rem;
      z-index: 30;
      box-shadow: 0 7px 32px #101920b0;
      cursor: pointer;
      transition: background 0.2s;
      font-weight: 600;
    }
    .go-to-cart-btn.active { display: block; }
    /* Корзина */
    .cart-modal {
      display: none;
      position: fixed;
      top: 60px;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(20,25,30, 0.97);
      z-index: 20;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding-top: 80px;
    }
    .cart-modal.active { display: flex; }
    .cart-content {
      background: #232d36;
      border-radius: 18px;
      padding: 28px 24px;
      min-width: 300px;
      text-align: center;
      max-width: 90vw;
    }
    .cart-title { font-size: 1.2rem; font-weight: bold; margin-bottom: 16px; }
    .cart-list { margin-bottom: 18px; }
    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      color: #fff;
    }
    .cart-empty { color: #aaa; }
    .close-cart { 
      background: #2e3640;
      color: #fff;
      border: none;
      border-radius: 7px;
      padding: 7px 16px;
      cursor: pointer; 
      font-size: 1rem;
      margin-top: 6px;
    }
    /* Профиль - окно редактирования */
    .profile-modal {
      display: none;
      position: fixed;
      top: 60px;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(20,25,30, 0.97);
      z-index: 25;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding-top: 60px;
    }
    .profile-modal.active { display: flex; }
    .profile-content {
      background: #232d36;
      border-radius: 18px;
      padding: 32px 30px;
      min-width: 310px;
      max-width: 92vw;
      text-align: left;
    }
    .profile-title {
      font-size: 1.23rem;
      font-weight: bold;
      margin-bottom: 18px;
      text-align: center;
    }
    .profile-form { display: flex; flex-direction: column; gap: 12px; }
    .profile-form input, .profile-form select {
      background: #182027;
      color: #fff;
      border: 1.3px solid #313e4a;
      border-radius: 7px;
      padding: 10px 12px;
      font-size: 1rem;
      width: 100%;
    }
    .save-profile-btn,
    .close-profile-btn {
      margin-top: 10px;
      background: #4151fc;
      color: #fff;
      border-radius: 8px;
      padding: 9px 0;
      font-size: 1rem;
      border: none;
      cursor: pointer;
    }
    .close-profile-btn {
      background: #2e3640;
      margin-top: 5px;
    }
    .bot-link {
      text-align: center;
      padding: 14px;
      background: #1b232b;
      color: #6acecb;
      border-top: 1px solid #293038;
      font-size: .93rem;
      letter-spacing: 0.03em;
    }
  </style>
</head>
<body>
<div class="header">
  <img src="https://cdn-icons-png.flaticon.com/128/455/455667.png" alt="logo" class="logo">
  <span class="title">Каталог Nezhno</span>
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Поиск по каталогу..."/>
  </div>
  <span class="menu" id="menuBtn">&#9776;</span>
  <div class="menu-popup" id="menuPopup">
    <div class="menu-popup-item" id="profileBtn">&#128100; Профиль</div>
    <div class="menu-popup-item" id="cartBtn">&#128722; Корзина <span class="cart-count" id="cartCount">(0)</span></div>
  </div>
</div>

<!-- Каталог -->
<div class="catalog" id="catalog"></div>

<!-- Кнопка Перейти в корзину -->
<button class="go-to-cart-btn" id="goToCartBtn">Перейти в корзину</button>

<!-- Модальное окно корзины -->
<div class="cart-modal" id="cartModal">
  <div class="cart-content">
    <div class="cart-title">Ваша корзина</div>
    <div class="cart-list" id="cartList"></div>
    <button class="close-cart" id="closeCartBtn">Закрыть</button>
  </div>
</div>

<!-- Модальное окно профиля -->
<div class="profile-modal" id="profileModal">
  <div class="profile-content">
    <div class="profile-title">Настройки профиля</div>
    <form class="profile-form" id="profileForm">
      <input type="text" id="surname" placeholder="Фамилия">
      <input type="text" id="name" placeholder="Имя">
      <input type="text" id="patronymic" placeholder="Отчество">
      <input type="email" id="email" placeholder="Почта">
      <select id="country">
        <option value="">Выберите страну</option>
        <option value="Россия">Россия</option>
        <option value="Беларусь">Беларусь</option>
        <option value="Казахстан">Казахстан</option>
        <!-- Добавь свои страны -->
      </select>
      <select id="region">
        <option value="">Выберите регион</option>
        <option value="Москва">Москва</option>
        <option value="СПб">Санкт-Петербург</option>
        <!-- Добавь свои регионы -->
      </select>
      <select id="city">
        <option value="">Выберите город/посёлок</option>
        <option value="Москва">Москва</option>
        <option value="Петербург">Петербург</option>
        <!-- Добавь свои города -->
      </select>
      <button type="submit" class="save-profile-btn">Сохранить</button>
      <button type="button" class="close-profile-btn" id="closeProfileBtn">Закрыть</button>
    </form>
  </div>
</div>

<div class="bot-link">@hustlehh_bot</div>

<script>
const productsData = [
  {id: '1', img: 'https://static.insales.ru/images/collections/1/5375/391322351/medium_B_Complex.jpg', title: 'Свечка базовая 250мл', price: 2290},
  {id: '2', img: 'https://static.insales.ru/images/collections/1/5375/391323985/medium_BPC-157.jpg', title: 'Новогодний набор', price: 3390},
  {id: '3', img: 'https://static.insales.ru/images/collections/1/5375/391324194/medium_SJ-PP-332.jpg', title: 'Свечка 100мл', price: 1790},
];
const catalog = document.getElementById('catalog');
const searchInput = document.getElementById('searchInput');
let cart = [];

function renderCatalog(products) {
  catalog.innerHTML = '';
  products.forEach(product => {
    const card = document.createElement('div');
    card.className = 'product-card';
    card.innerHTML = `
      <img class="product-img" src="${product.img}" alt="${product.title}">
      <div class="product-price">${product.price} ₽</div>
      <div class="product-title">${product.title}</div>
      <button class="add-btn" data-id="${product.id}">+ Добавить</button>
    `;
    catalog.appendChild(card);
  });
  document.querySelectorAll('.add-btn').forEach(btn => {
    btn.onclick = () => {
      const id = btn.getAttribute('data-id');
      addToCart(id);
    }
  });
}
// Поиск
searchInput.addEventListener('input', function() {
  const value = this.value.toLowerCase();
  const filtered = productsData.filter(p => 
    p.title.toLowerCase().includes(value)
  );
  renderCatalog(filtered);
});

// Корзина
const cartBtn = document.getElementById('cartBtn');
const cartCount = document.getElementById('cartCount');
const cartModal = document.getElementById('cartModal');
const cartList = document.getElementById('cartList');
const closeCartBtn = document.getElementById('closeCartBtn');
const goToCartBtn = document.getElementById('goToCartBtn');
function addToCart(id) {
  const product = productsData.find(p => p.id === id);
  if (!product) return;
  const found = cart.find(item => item.id === id);
  if (found) found.qty += 1; else cart.push({...product, qty: 1});
  updateCartUI();
}
function updateCartUI() {
  const total = cart.reduce((a, b) => a + b.qty, 0);
  cartCount.textContent = `(${total})`;
  // показать/скрыть кнопку “перейти в корзину”
  if (total > 0) {
    goToCartBtn.classList.add('active');
  } else {
    goToCartBtn.classList.remove('active');
  }
}
cartBtn.onclick = openCartModal;
goToCartBtn.onclick = openCartModal;
function openCartModal() {
  cartModal.classList.add('active');
  cartList.innerHTML = '';
  if (!cart.length) {
    cartList.innerHTML = '<div class="cart-empty">Корзина пуста</div>';
  } else {
    cart.forEach(item => {
      cartList.innerHTML += `
        <div class="cart-item">
          <span>${item.title} × ${item.qty}</span>
          <button onclick="removeFromCart('${item.id}')">✕</button>
        </div>
      `;
    });
  }
}
window.removeFromCart = function(id) {
  cart = cart.filter(item => item.id !== id);
  updateCartUI();
  openCartModal();
};
closeCartBtn.onclick = () => cartModal.classList.remove('active');

renderCatalog(productsData);
updateCartUI();

// Меню
const menuBtn = document.getElementById('menuBtn');
const menuPopup = document.getElementById('menuPopup');
let menuOpen = false;
menuBtn.onclick = () => {
  menuOpen = !menuOpen;
  if (menuOpen) menuPopup.classList.add('active');
  else menuPopup.classList.remove('active');
};
// закрыть меню при клике вне него
document.addEventListener('click', (e) => {
  if (!menuBtn.contains(e.target) && !menuPopup.contains(e.target)) {
    menuPopup.classList.remove('active');
    menuOpen = false;
  }
});
// Профиль — модальное окно
const profileModal = document.getElementById('profileModal');
const profileBtn = document.getElementById('profileBtn');
const closeProfileBtn = document.getElementById('closeProfileBtn');
const profileForm = document.getElementById('profileForm');
profileBtn.onclick = () => {
  profileModal.classList.add('active');
  menuPopup.classList.remove('active');
  menuOpen = false;
  // восстановление данных при открытии
  const data = JSON.parse(localStorage.getItem('profileData') || '{}');
  profileForm.surname.value = data.surname || '';
  profileForm.name.value = data.name || '';
  profileForm.patronymic.value = data.patronymic || '';
  profileForm.email.value = data.email || '';
  profileForm.country.value = data.country || '';
  profileForm.region.value = data.region || '';
  profileForm.city.value = data.city || '';
};
closeProfileBtn.onclick = () => profileModal.classList.remove('active');
profileForm.onsubmit = function(e) {
  e.preventDefault();
  // сохранить в localStorage (можно подправить под backend)
  const formData = {
    surname: this.surname.value,
    name: this.name.value,
    patronymic: this.patronymic.value,
    email: this.email.value,
    country: this.country.value,
    region: this.region.value,
    city: this.city.value
  };
  localStorage.setItem('profileData', JSON.stringify(formData));
  alert('Профиль сохранён!');
  profileModal.classList.remove('active');
};
</script>
</body>
</html>


